// Package docs Code generated by swaggo/swag. DO NOT EDIT
package docs

import "github.com/swaggo/swag"

const docTemplate = `{
    "schemes": {{ marshal .Schemes }},
    "swagger": "2.0",
    "info": {
        "description": "{{escape .Description}}",
        "title": "{{.Title}}",
        "contact": {},
        "version": "{{.Version}}"
    },
    "host": "{{.Host}}",
    "basePath": "{{.BasePath}}",
    "paths": {
        "/auth/refresh-master": {
            "post": {
                "description": "R√©initialise toute la cha√Æne de s√©curit√© (Ratchet, JWT, Secrets) en g√©n√©rant un nouveau MasterToken.\nCette route est l'ultime recours (\"Last Resort\") lorsque le Ratchet est d√©synchronis√© ou que le JWT est expir√© depuis trop longtemps.\n\n**M√©canisme de R√©silience :**\n1. Recherche la session via le MasterToken dans **Redis**.\n2. Si introuvable (crash cache), cherche dans **MongoDB**.\n3. Si introuvable, cherche dans **PostgreSQL** (Source de v√©rit√©).\n4. Si trouv√©, valide la signature HMAC et r√©initialise tout.\n\n**Actions Serveur :**\n* G√©n√©ration de ` + "`" + `NewMasterToken` + "`" + ` et ` + "`" + `NewJWT` + "`" + `.\n* Reset du Ratchet (Secret 0 = NewMaster, Secret 1 = DeviceToken).\n* Mise √† jour asynchrone de Postgres et Mongo pour persister le nouveau MasterToken.\n",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Hard Refresh (Master Token Rotation)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer \u003cCurrent_JWT\u003e (Optionnel, pour continuit√©)",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "HMAC calcul√© avec l'ANCIEN MasterToken",
                        "name": "X-Signature",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Timestamp de la requ√™te",
                        "name": "X-Timestamp",
                        "in": "header",
                        "required": true
                    },
                    {
                        "description": "Donn√©es de reset (MasterToken, UserID, Username)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.RefreshMasterInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Nouveaux identifiants g√©n√©r√©s",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.RefreshMasterResponse"
                        }
                    },
                    "400": {
                        "description": "Format invalide ou Headers manquants",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "MasterToken introuvable ou Signature HMAC invalide",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Erreur serveur critique (G√©n√©ration/Sauvegarde)",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/login": {
            "post": {
                "description": "Authentifie un utilisateur via email/password et renvoie son profil complet + token.\n\n**R√®gles \u0026 Erreurs :**\n\nüî¥ **400 Bad Request :**\n* ` + "`" + `The 'data' field containing the JSON is required` + "`" + ` : Champ 'data' manquant.\n* ` + "`" + `Invalid JSON format in 'data'` + "`" + ` : Le JSON envoy√© est mal form√©.\n\nüü† **401 Unauthorized :**\n* ` + "`" + `Invalid email or password` + "`" + ` : Identifiants incorrects ou utilisateur introuvable.\n\n‚õî **403 Forbidden :**\n* ` + "`" + `Account deactivated` + "`" + ` : Le compte a √©t√© d√©sactiv√©.\n* ` + "`" + `Account banned` + "`" + ` : Le compte a √©t√© banni.\n\n‚ö´ **500 Internal Server Error :**\n* ` + "`" + `database error` + "`" + ` : Erreur technique interne.",
                "consumes": [
                    "application/json",
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Connecter un utilisateur",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Donn√©es JSON (si multipart/form-data)",
                        "name": "data",
                        "in": "formData"
                    },
                    {
                        "description": "Donn√©es JSON (si application/json)",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.LoginInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.LoginResponse"
                        }
                    },
                    "400": {
                        "description": "Adresse IP invalide",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Compte bloqu√©/banni",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/post": {
            "post": {
                "description": "Cr√©e un post avec du contenu texte, des hashtags, des mentions d'utilisateurs et entre 1 et 4 images.\nCette route n√©cessite une authentification par JWT et une signature HMAC valide.\n\n**R√®gles de validation \u0026 Erreurs :**\n\nüî¥ **400 Bad Request (Erreurs client) :**\n* ` + "`" + `Field 'data' is required` + "`" + ` : Le champ texte 'data' contenant le JSON est manquant.\n* ` + "`" + `Invalid JSON: ...` + "`" + ` : Le format JSON dans le champ 'data' est incorrect.\n* ` + "`" + `Too many tags (max 10)` + "`" + ` : Le nombre de hashtags ou d'utilisateurs tagu√©s d√©passe 10.\n* ` + "`" + `Maximum 4 images allowed` + "`" + ` : Vous avez tent√© d'envoyer plus de 4 fichiers m√©dia.\n\nüü† **401 Unauthorized (Authentification) :**\n* ` + "`" + `Utilisateur non identifi√©` + "`" + ` : Le userID n'a pas pu √™tre extrait du token JWT ou contexte manquant.\n* ` + "`" + `Signature HMAC invalide` + "`" + ` : (G√©r√© par le middleware) La signature ne correspond pas au contenu.\n\n‚ö´ **500 Internal Server Error (Serveur) :**\n* ` + "`" + `Failed to create post: ...` + "`" + ` : Erreur lors de l'upload MinIO ou de l'insertion dans la file d'attente Redis (Queue).",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "posts"
                ],
                "summary": "Cr√©er une nouvelle publication",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer \u003cvotre_jwt\u003e",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Signature HMAC de la requ√™te",
                        "name": "X-Signature",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Timestamp Unix de la requ√™te",
                        "name": "X-Timestamp",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "Images du post (1 √† 4 fichiers)",
                        "name": "media",
                        "in": "formData"
                    },
                    {
                        "type": "string",
                        "description": "Donn√©es JSON (domain.CreatePostInput)",
                        "name": "data",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.CreatePostResponse"
                        }
                    },
                    "400": {
                        "description": "Donn√©es invalides ou trop de fichiers",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Session expir√©e ou signature HMAC corrompue",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Erreur interne de persistance",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/renew-jwt": {
            "post": {
                "description": "G√©n√®re un nouveau JWT pour l'utilisateur et effectue une rotation de s√©curit√© des secrets (Ratchet).\nCette route est critique et n√©cessite une signature HMAC valide bas√©e sur le secret actuel de la session.\n\n**M√©canisme :**\n1. V√©rifie la signature HMAC du body avec les headers de s√©curit√©.\n2. Identifie la session via l'ID utilisateur et le ` + "`" + `X-Secret` + "`" + `.\n3. Calcule le prochain secret (N+1) et met √† jour l'historique (Ratchet).\n4. Renvoie le nouveau JWT.\n\n**R√®gles \u0026 Erreurs :**\n\nüî¥ **400 Bad Request :**\n* ` + "`" + `Erreur lecture body` + "`" + ` : Impossible de lire le corps de la requ√™te.\n* ` + "`" + `Invalid JSON format` + "`" + ` : Le JSON envoy√© est mal form√©.\n* ` + "`" + `Headers de s√©curit√© manquants` + "`" + ` : Il manque ` + "`" + `Authorization` + "`" + `, ` + "`" + `X-Secret` + "`" + `, ` + "`" + `X-Signature` + "`" + ` ou ` + "`" + `X-Timestamp` + "`" + `.\n\nüü† **401 Unauthorized :**\n* ` + "`" + `Signature HMAC invalide` + "`" + ` : La signature ne correspond pas au contenu (tentative de falsification).\n* ` + "`" + `Session invalide ou Secret incorrect` + "`" + ` : Le secret fourni ne correspond √† aucune session active pour cet utilisateur (ou d√©synchronisation Ratchet).\n\n‚ö´ **500 Internal Server Error :**\n* ` + "`" + `Erreur g√©n√©ration token` + "`" + ` : √âchec de la cr√©ation du JWT.\n* ` + "`" + `Erreur rotation secrets` + "`" + ` : Impossible de mettre √† jour Redis (Ratchet bloqu√©).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Renouveler le JWT (Ratchet Rotation)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer \u003cLast_JWT\u003e",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Secret actuel de la session",
                        "name": "X-Secret",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Signature HMAC calcul√©e",
                        "name": "X-Signature",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Timestamp de la requ√™te",
                        "name": "X-Timestamp",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.RenewJWTResponse"
                        }
                    },
                    "400": {
                        "description": "Requ√™te invalide",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Authentification / Signature refus√©e",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Erreur serveur critique",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/signup": {
            "post": {
                "description": "Inscription compl√®te avec upload d'avatar et donn√©es JSON.\n\n**R√®gles de validation \u0026 Erreurs :**\n\nüî¥ **400 Bad Request (Erreurs client) :**\n* ` + "`" + `The 'data' field containing the JSON is required` + "`" + ` : Tu as oubli√© d'envoyer le champ texte 'data'.\n* ` + "`" + `Invalid JSON format in 'data': ...` + "`" + ` : Ton JSON est mal √©crit (virgule manquante, accolade, etc).\n* ` + "`" + `Invalid date format. Expected format: ddmmaaaa` + "`" + ` : La date de naissance n'est pas bonne.\n* ` + "`" + `Gender must be 0, 1, 2, or null` + "`" + ` : Tu as envoy√© un entier invalide pour le sexe.\n* ` + "`" + `Impossible to read image file` + "`" + ` : Le fichier image est corrompu ou illisible.\n\nüü† **409 Conflict (Doublons) :**\n* ` + "`" + `This username is already taken` + "`" + ` : Le pseudo est d√©j√† en base.\n\n‚ö´ **500 Internal Server Error (Probl√®mes serveur) :**\n* ` + "`" + `Internal error (image upload)` + "`" + ` : MinIO est down ou mal configur√©.\n* ` + "`" + `Internal error (token generation)` + "`" + ` : Probl√®me avec la signature JWT.\n* ` + "`" + `database error` + "`" + ` : Postgres ou Mongo ne r√©pondent pas.",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Cr√©er un compte utilisateur",
                "parameters": [
                    {
                        "type": "file",
                        "description": "Photo de profil (Image)",
                        "name": "profile_picture",
                        "in": "formData"
                    },
                    {
                        "type": "string",
                        "description": "Donn√©es JSON (domain.SignUpInput)",
                        "name": "data",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.SignUpResponse"
                        }
                    },
                    "400": {
                        "description": "Donn√©es invalides (Voir liste ci-dessus)",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflit (Pseudo pris)",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Erreur Serveur",
                        "schema": {
                            "$ref": "#/definitions/github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "github_com_QuentinRegnier_nubo-backend_internal_domain.CreatePostResponse": {
            "type": "object",
            "properties": {
                "post_id": {
                    "type": "integer"
                }
            }
        },
        "github_com_QuentinRegnier_nubo-backend_internal_domain.ErrorResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string",
                    "example": "Invalid JSON format"
                }
            }
        },
        "github_com_QuentinRegnier_nubo-backend_internal_domain.LoginInput": {
            "type": "object"
        },
        "github_com_QuentinRegnier_nubo-backend_internal_domain.LoginResponse": {
            "type": "object",
            "properties": {
                "badges": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "ban_expires_at": {
                    "type": "string"
                },
                "ban_reason": {
                    "type": "string"
                },
                "banned": {
                    "type": "boolean",
                    "example": false
                },
                "bio": {
                    "type": "string",
                    "example": "Bio..."
                },
                "birthdate": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "desactivated": {
                    "type": "boolean",
                    "example": false
                },
                "email": {
                    "type": "string",
                    "example": "john@nubo.com"
                },
                "email_verified": {
                    "type": "boolean",
                    "example": true
                },
                "expires_at": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string",
                    "example": "John"
                },
                "grade": {
                    "type": "integer",
                    "example": 0
                },
                "jwt": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1Ni..."
                },
                "last_name": {
                    "type": "string",
                    "example": "Doe"
                },
                "location": {
                    "type": "string",
                    "example": "Paris"
                },
                "master_token": {
                    "type": "string",
                    "example": "eyJhbGci..."
                },
                "message": {
                    "type": "string",
                    "example": "Login successful"
                },
                "phone": {
                    "type": "string",
                    "example": "+33612345678"
                },
                "phone_verified": {
                    "type": "boolean",
                    "example": true
                },
                "school": {
                    "type": "string",
                    "example": "42"
                },
                "sex": {
                    "type": "integer",
                    "example": 1
                },
                "updated_at": {
                    "type": "string"
                },
                "user_id": {
                    "type": "integer",
                    "example": 42
                },
                "username": {
                    "type": "string",
                    "example": "johndoe"
                },
                "work": {
                    "type": "string",
                    "example": "Dev"
                }
            }
        },
        "github_com_QuentinRegnier_nubo-backend_internal_domain.RefreshMasterInput": {
            "type": "object",
            "required": [
                "id_user",
                "master_token",
                "username"
            ],
            "properties": {
                "id_user": {
                    "type": "integer"
                },
                "master_token": {
                    "description": "L'ancien MasterToken",
                    "type": "string"
                },
                "username": {
                    "description": "Le username de l'utilisateur",
                    "type": "string"
                }
            }
        },
        "github_com_QuentinRegnier_nubo-backend_internal_domain.RefreshMasterResponse": {
            "type": "object",
            "properties": {
                "master_token": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                },
                "token": {
                    "description": "Le nouveau JWT",
                    "type": "string"
                }
            }
        },
        "github_com_QuentinRegnier_nubo-backend_internal_domain.RenewJWTResponse": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string"
                },
                "token": {
                    "type": "string"
                }
            }
        },
        "github_com_QuentinRegnier_nubo-backend_internal_domain.SignUpResponse": {
            "type": "object",
            "properties": {
                "expires_at": {
                    "type": "string"
                },
                "jwt": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1Ni..."
                },
                "master_token": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1Ni..."
                },
                "message": {
                    "type": "string",
                    "example": "User created successfully"
                },
                "profile_picture_id": {
                    "type": "integer"
                },
                "user_id": {
                    "type": "integer",
                    "example": 42
                }
            }
        }
    }
}`

// SwaggerInfo holds exported Swagger Info so clients can modify it
var SwaggerInfo = &swag.Spec{
	Version:          "1.0",
	Host:             "",
	BasePath:         "/api/v11",
	Schemes:          []string{},
	Title:            "Mon API Propre",
	Description:      "Documentation de l'API.\nPour mettre √† jour :",
	InfoInstanceName: "swagger",
	SwaggerTemplate:  docTemplate,
	LeftDelim:        "{{",
	RightDelim:       "}}",
}

func init() {
	swag.Register(SwaggerInfo.InstanceName(), SwaggerInfo)
}
